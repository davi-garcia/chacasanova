<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChÃ¡ de Casa Nova</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Roboto&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="casa.ico" type="image/x-icon">
</head>
<body>

<div class="sobrenos">
  <!-- Splash -->
  <div id="splash-screen">
    <span id="splash-message"></span>
  </div>

  <!-- Navbar -->
  <nav>
    <a href="#sobre-nos">Sobre nÃ³s ğŸ’•</a>
    <a href="#entrada">Lista de Presentes ğŸ</a>
  </nav>

  <!-- SeÃ§Ã£o Sobre nÃ³s -->
  <section id="sobre-nos">
    <h1>Sobre nÃ³s ğŸ’•</h1>
    <div class="sobre-container">
      <img src="./foto_casal.jpeg" alt="Foto do casal">
      <div class="sobre-texto">
        <h4>OlÃ¡, seja bem vindo! Se vocÃª estÃ¡ nesse site, significa que vocÃª foi convidado para participar desse momento extremamente especial!</h4>
      <h4>Este momento serÃ¡ onde compartilharemos essa alegria com nossos amigos e familiares
          e estamos felizes por ter vocÃª fazendo parte dessa histÃ³ria.
        </h4>
        <h4>
          Este site Ã© um jeito de deixar tudo mais fÃ¡cil: vocÃª encontra os presentes, confirma sua presenÃ§a 
          e ainda pode conhecer um pouco mais da nossa historia. ğŸ’–
        </h4>
      </div>
    </div>
  </section>
    <h1 style="text-align:center;">A jornada atÃ© aqui</h1>

  <div class="timeline">
    <div class="timeline-event">
      <img src="./O comeÃ§o.jpeg" alt="Nos conhecemos">
      <div class="dot"></div>
      <h3><b>Nosso comeÃ§o</b></h3>
      <h5>Em seu trabalho <3</h5>
    </div>

    <div class="timeline-event">                                    
      <img src="./Amor.jpeg" alt="Nos apaixonamos">
      <div class="dot"></div>
      <h3><b>Nasce o amor</b></h3>
      <h5>Quando nos apaixonamos</h5>
    </div>

    <div class="timeline-event">
      <img src="./Barradas.jpeg" alt="Sempre curtindo nossos momentos juntos">
      <div class="dot"></div>
      <h3><b>Companheirismo</b></h3>
      <h5>Sempre curtindo nossos momentos juntos</h5>
    </div>

    <div class="timeline-event">
      <img src="./Reconhecimento de passos.jpeg" alt="Sempre nos momentos importantes, um para o outro">
      <div class="dot"></div>
      <h3><b>Parceria</b></h3>
      <h5>Sempre nos momentos importantes, um para o outro</h5>
    </div>
    
    
    <div class="timeline-event">
      <img src="./fotocasal2.jpeg" alt="Nossa conquista">
      <div class="dot"></div>
      <h3><b>Nossa conquista</b></h3>
      <h5>Quando conquistamos nossa independÃªncia</h5>
    </div>
    
    <div class="timeline-event">
      <img src="./O pedido.jpeg" alt="Chegou a hora">
      <div class="dot"></div>
      <h3><b>Namoro</b></h3>
      <h5>Finalmente chegou a hora</h5>
    </div>
  </br>    
 </br>  
</div>
 
  <!-- Entrada de nome -->
  <div id="entrada">
  
<div class="container2">
  <h1>ğŸ‰ ChÃ¡ de Casa Nova ğŸ‰</h1>
  <h2>ğŸ’™ Davi & Gabriel ğŸ’™</h2>
  <p class="subtitle">Preencha seus dados e escolha um presente:</p>

  <div class="formulario2">
    <form id="formPresente">
      <label for="nome">Nome</label>
      <input type="text" id="nome" required>

      <label for="sobrenome">Sobrenome</label>
      <input type="text" id="sobrenome" required>

      <label for="presente">Escolha um presente</label>
      <div class="custom-select-wrapper">
      <div class="custom-select" id="customSelect">Selecione um presente</div>
      <div class="custom-options" id="customOptions"></div>
      </div>

      <label id="contador" class="contador">ğŸ Presentes disponÃ­veis: 3</label>

      <button type="submit">Confirmar PresenÃ§a ğŸ’</button> </br></br>

      <p class="subtitle">InÃ­cio: Ã€s 13h00min!</p>
      <p class="subtitle">ğŸ¡ EndereÃ§o: Rua RosÃ¡rio 91 B CabuÃ§u, CEP: 26291-236</p>
    </form>
  </div>
</div>


<div style="text-align: center;"
  <iframe src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d709.2062218648955!2d-43.54009693720192!3d-22.76884262233587!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjLCsDQ2JzA3LjIiUyA0M8KwMzInMjMuNiJX!5e0!3m2!1spt-BR!2sbr!4v1761583552577!5m2!1spt-BR!2sbr" 
    width="100%" 
    height="450" 
    style="max-width: 600px; border:0;" 
    allowfullscreen="" 
    loading="lazy" 
    referrerpolicy="no-referrer-when-downgrade">
  </iframe>

</div>

<script>
const apiUrl = "https://script.google.com/macros/s/AKfycbwenTJlBtOBtz7sKH1Xq1L3Sr1mPhLbmwHWwLyH4-81KYfA-m-LOmUnMEHUcTGCu-yA/exec";
let presenteSelecionado = null;

async function carregarPresentes() {
  try {
    const res = await fetch(apiUrl);
    const dados = await res.json();
    const presentes = Array.isArray(dados) ? dados : dados.presentes || [];

    const optionsDiv = document.getElementById("customOptions");
    optionsDiv.innerHTML = "";
    presentes.forEach(p => {
      const div = document.createElement("div");
      div.classList.add("custom-option");
      div.textContent = p;
      div.addEventListener("click", () => {
        presenteSelecionado = p;
        document.getElementById("customSelect").textContent = p;
        optionsDiv.style.display = "none";
      });
      optionsDiv.appendChild(div);
    });

    document.getElementById("contador").textContent = `ğŸ Presentes disponÃ­veis: ${presentes.length}`;
  } catch(err) { console.error("Erro ao carregar dados:", err); }
}

// Toggle dropdown
document.getElementById("customSelect").addEventListener("click", () => {
  const optionsDiv = document.getElementById("customOptions");
  optionsDiv.style.display = optionsDiv.style.display === "block" ? "none" : "block";
});

// Fecha dropdown ao clicar fora
document.addEventListener("click", (e) => {
  const wrapper = document.querySelector(".custom-select-wrapper");
  if(!wrapper.contains(e.target)){
    document.getElementById("customOptions").style.display = "none";
  }
});

function validarTexto(str){ const regex = /^[A-ZÃ€-Ãš\s]+$/; return regex.test(str); }

document.getElementById("formPresente").addEventListener("submit", async (e) => {
  e.preventDefault();
  let nome = document.getElementById("nome").value.trim().toUpperCase();
  let sobrenome = document.getElementById("sobrenome").value.trim().toUpperCase();

  if (!validarTexto(nome) || !validarTexto(sobrenome)) {
    alert("âš ï¸ Digite apenas letras e espaÃ§os em Nome e Sobrenome."); return;
  }
  if(!presenteSelecionado){
    alert("âš ï¸ Selecione um presente."); return;
  }

// NOVO: Desabilita o botÃ£o
  botaoSubmit.disabled = true;

  // NOVO: Define o contador e o intervalo
  let segundosRestantes = 8;
  botaoSubmit.textContent = `Aguarde ${segundosRestantes}s...`;

  const intervalo = setInterval(() => {
    segundosRestantes--;
    botaoSubmit.textContent = `Aguarde ${segundosRestantes}s...`;

    if (segundosRestantes <= 0) {
      clearInterval(intervalo);
      botaoSubmit.disabled = false; // Reabilita o botÃ£o
      botaoSubmit.textContent = textoOriginalBotao; // Restaura o texto original
    }
  }, 1000); // 1000ms = 1 segundo

  await fetch(apiUrl, { method:"POST", body: JSON.stringify({nome, sobrenome, presente:presenteSelecionado}) });
  alert("âœ… Obrigado! Seu presente foi reservado com sucesso.");
  carregarPresentes();
  document.getElementById("nome").value = "";
  document.getElementById("sobrenome").value = "";
  presenteSelecionado = null;
  document.getElementById("customSelect").textContent = "Selecione um presente";
});

carregarPresentes();
</script>


  <script>
  const frases = [
    "Bem-vindo ao nosso site",
    "'As muitas Ã¡guas nÃ£o poderiam apagar o amor' - CÃ¢nticos 8:7",
  ];

  let i = 0;
  const msg = document.getElementById("splash-message");
  const splash = document.getElementById("splash-screen");

  function mostrarFrase() {
    msg.style.opacity = "0";
    setTimeout(() => {
      msg.innerText = frases[i];
      msg.style.opacity = "1";
      i++;
    }, 1100);
  }

  msg.innerText = frases[i];
  msg.style.opacity = "1";
  i++;

  setInterval(() => {
    if (i < frases.length) {
      mostrarFrase();
    }
  }, 7000);

  const tempoTotal = frases.length * 5500;

  setTimeout(() => {
    splash.style.opacity = "0";
    setTimeout(() => {
      splash.style.display = "none";
    }, 1500);
  }, tempoTotal);

  function salvarNome() {
    const nome = document.getElementById("nomeConvidado").value.trim();
    if (nome) {
      localStorage.setItem("convidado", nome);
      window.location.href = "produtos.html";
    } else {
      alert("Por favor, digite seu nome.");
    }
  }
  </script>
</body>
</html>